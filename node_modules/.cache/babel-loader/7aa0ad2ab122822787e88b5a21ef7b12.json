{"ast":null,"code":"import { db } from \"../../firebase\";\nimport { collection, doc, getDoc, getDocs, addDoc, updateDoc, deleteDoc } from \"firebase/firestore\"; //Action Type\n\nconst LOAD = \"dictionary/LOAD\";\nconst CREATE = \"dictionary/CREATE\";\nconst DELETE = \"dictionary/DELETE\";\nconst UPDATE = \"dictionary/UPDATE\";\nconst LOADED = \"dictionary/LOADED\";\nconst initialState = {\n  is_loaded: false,\n  list: []\n}; //Action Creator\n\nexport const loadDictionary = dictionary_list => {\n  return {\n    type: LOAD,\n    dictionary_list\n  };\n};\nexport const createDictionary = dictionary => {\n  return {\n    type: CREATE,\n    dictionary\n  };\n};\nexport const deleteDictionary = dictionary_index => {\n  return {\n    type: DELETE,\n    dictionary_index\n  };\n};\nexport function updateDictionary(dictionary_id, word, explanation, example) {\n  return {\n    type: UPDATE,\n    dictionary_id,\n    word,\n    explanation,\n    example\n  };\n}\nexport function loadedDictionary(loaded) {\n  return {\n    type: LOADED,\n    loaded\n  };\n} //middlewares\n\nexport const loadDictionaryFB = () => {\n  return async function (dispatch) {\n    const dictionary_data = await getDocs(collection(db, \"dictionary\"));\n    let dictionary_list = [];\n    dictionary_data.forEach(doc => {\n      dictionary_list.push({\n        id: doc.id,\n        ...doc.data()\n      });\n      console.log(doc.data());\n    });\n    console.log(dictionary_list);\n    dispatch(loadDictionary(dictionary_list));\n  };\n}; //추가\n\nexport const addDictionaryFB = dictionary => {\n  return async function (dispatch) {\n    dispatch(loadedDictionary(false));\n    const docRef = await addDoc(collection(db, \"dictionary\"), dictionary);\n    const dictionary_data = {\n      id: docRef.id,\n      ...dictionary\n    };\n    dispatch(createDictionary(dictionary_data));\n  };\n}; //삭제\n\nexport const deleteDictionaryFB = dictionary_id => {\n  return async function (dispatch) {\n    const docRef = doc(db, \"dictionary\", dictionary_id);\n    await deleteDoc(docRef);\n    dispatch(deleteDictionary(dictionary_id));\n  };\n}; //업데이트\n\nexport const updateDictionaryFB = (dictionary_id, word, explanation, example) => {\n  return async function (dispatch, getState) {\n    if (!dictionary_id) {\n      window.alert(\"아이디가 없습니다.\");\n      return;\n    }\n\n    const docRef = doc(db, \"dictionary\", dictionary_id); // 어떤 걸 수정 할 지 document를 집어온다.\n\n    await updateDoc(docRef, {\n      word: word,\n      explanation: explanation,\n      example: example\n    });\n    dispatch(updateDictionary(dictionary_id, word, explanation, example));\n  };\n}; // Reducer\n\nexport default function reducer() {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  switch (action.type) {\n    // do reducer stuff\n    case \"dictionary/LOADED\":\n      {\n        return { ...state,\n          is_loaded: action.loaded\n        };\n      }\n\n    case \"dictionary/LOAD\":\n      return {\n        list: action.dictionary_list,\n        is_loaded: true\n      };\n\n    case \"dictionary/CREATE\":\n      {\n        const new_dictionary_list = [...state.list, action.dictionary];\n        return {\n          list: new_dictionary_list,\n          is_loaded: true\n        };\n      }\n\n    case \"dictionary/UPDATE\":\n      {\n        const new_dictionary_list = state.list.map((item, i) => {\n          if (item.id === action.dictionary_id) {\n            return { ...item,\n              word: action.word,\n              explanation: action.explanation,\n              example: action.example\n            };\n          } else {\n            return item;\n          }\n        });\n        return { ...state,\n          list: new_dictionary_list\n        };\n      }\n\n    case \"dictionary/DELETE\":\n      {\n        const new_dictionary_list = state.list.filter((item, i) => {\n          return item.id !== action.dictionary_id;\n        });\n        return { ...state,\n          list: new_dictionary_list\n        };\n      }\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/bong/sparta/react_week2/dictionary/src/redux/modules/dictionary.js"],"names":["db","collection","doc","getDoc","getDocs","addDoc","updateDoc","deleteDoc","LOAD","CREATE","DELETE","UPDATE","LOADED","initialState","is_loaded","list","loadDictionary","dictionary_list","type","createDictionary","dictionary","deleteDictionary","dictionary_index","updateDictionary","dictionary_id","word","explanation","example","loadedDictionary","loaded","loadDictionaryFB","dispatch","dictionary_data","forEach","push","id","data","console","log","addDictionaryFB","docRef","deleteDictionaryFB","updateDictionaryFB","getState","window","alert","reducer","state","action","new_dictionary_list","map","item","i","filter"],"mappings":"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","sourcesContent":["import { db } from \"../../firebase\";\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n} from \"firebase/firestore\";\n\n//Action Type\nconst LOAD = \"dictionary/LOAD\";\nconst CREATE = \"dictionary/CREATE\";\nconst DELETE = \"dictionary/DELETE\";\nconst UPDATE = \"dictionary/UPDATE\";\nconst LOADED = \"dictionary/LOADED\";\n\nconst initialState = {\n  is_loaded: false,\n  list: [],\n};\n\n//Action Creator\nexport const loadDictionary = (dictionary_list) => {\n  return { type: LOAD, dictionary_list };\n};\n\nexport const createDictionary = (dictionary) => {\n  return { type: CREATE, dictionary };\n};\n\nexport const deleteDictionary = (dictionary_index) => {\n  return { type: DELETE, dictionary_index };\n};\n\nexport function updateDictionary(dictionary_id, word, explanation, example) {\n  return {\n    type: UPDATE,\n    dictionary_id,\n    word,\n    explanation,\n    example,\n  };\n}\n\nexport function loadedDictionary(loaded) {\n  return {\n    type: LOADED,\n    loaded,\n  };\n}\n\n//middlewares\nexport const loadDictionaryFB = () => {\n  return async function (dispatch) {\n    const dictionary_data = await getDocs(collection(db, \"dictionary\"));\n\n    let dictionary_list = [];\n\n    dictionary_data.forEach((doc) => {\n      dictionary_list.push({ id: doc.id, ...doc.data() });\n      console.log(doc.data());\n    });\n    console.log(dictionary_list);\n    dispatch(loadDictionary(dictionary_list));\n  };\n};\n\n//추가\nexport const addDictionaryFB = (dictionary) => {\n  return async function (dispatch) {\n    dispatch(loadedDictionary(false));\n    const docRef = await addDoc(collection(db, \"dictionary\"), dictionary);\n    const dictionary_data = { id: docRef.id, ...dictionary };\n    dispatch(createDictionary(dictionary_data));\n  };\n};\n\n//삭제\nexport const deleteDictionaryFB = (dictionary_id) => {\n  return async function (dispatch) {\n    const docRef = doc(db, \"dictionary\", dictionary_id);\n    await deleteDoc(docRef);\n    dispatch(deleteDictionary(dictionary_id));\n  };\n};\n\n//업데이트\nexport const updateDictionaryFB = (\n  dictionary_id,\n  word,\n  explanation,\n  example\n) => {\n  return async function (dispatch, getState) {\n    if (!dictionary_id) {\n      window.alert(\"아이디가 없습니다.\");\n      return;\n    }\n\n    const docRef = doc(db, \"dictionary\", dictionary_id);\n    // 어떤 걸 수정 할 지 document를 집어온다.\n\n    await updateDoc(docRef, {\n      word: word,\n      explanation: explanation,\n      example: example,\n    });\n\n    dispatch(updateDictionary(dictionary_id, word, explanation, example));\n  };\n};\n\n// Reducer\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    // do reducer stuff\n    case \"dictionary/LOADED\": {\n      return { ...state, is_loaded: action.loaded };\n    }\n    case \"dictionary/LOAD\":\n      return { list: action.dictionary_list, is_loaded: true };\n    case \"dictionary/CREATE\": {\n      const new_dictionary_list = [...state.list, action.dictionary];\n      return { list: new_dictionary_list, is_loaded: true };\n    }\n    case \"dictionary/UPDATE\": {\n      const new_dictionary_list = state.list.map((item, i) => {\n        if (item.id === action.dictionary_id) {\n          return {\n            ...item,\n            word: action.word,\n            explanation: action.explanation,\n            example: action.example,\n          };\n        } else {\n          return item;\n        }\n      });\n      return { ...state, list: new_dictionary_list };\n    }\n    case \"dictionary/DELETE\": {\n      const new_dictionary_list = state.list.filter((item, i) => {\n        return item.id !== action.dictionary_id;\n      });\n      return { ...state, list: new_dictionary_list };\n    }\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}