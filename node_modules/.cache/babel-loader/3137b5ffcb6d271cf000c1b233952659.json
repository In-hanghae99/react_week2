{"ast":null,"code":"import _toConsumableArray from\"/Users/bong/sparta/react_week2/dictionary/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/bong/sparta/react_week2/dictionary/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"/Users/bong/sparta/react_week2/dictionary/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/bong/sparta/react_week2/dictionary/node_modules/@babel/runtime/regenerator/index.js\";import{db}from\"../../firebase\";import{collection,doc,getDoc,getDocs,addDoc,updateDoc,deleteDoc}from\"firebase/firestore\";//Action Type\nvar LOAD=\"dictionary/LOAD\";var CREATE=\"dictionary/CREATE\";var DELETE=\"dictionary/DELETE\";var initialState={list:[{word:\"aaa\",explanation:\"aaa\",example:\"aaa\"},{word:\"bbb\",explanation:\"bbb\",example:\"bbb\"},{word:\"ccc\",explanation:\"ccc\",example:\"ccc\"},{word:\"ddd\",explanation:\"ddd\",example:\"ddd\"},{word:\"eee\",explanation:\"eee\",example:\"eee\"},{word:\"fff\",explanation:\"fff\",example:\"fff\"}]};//Action Creator\nexport var loadDictionary=function loadDictionary(dictionary_list){return{type:LOAD,dictionary_list:dictionary_list};};export var createDictionary=function createDictionary(dictionary){return{type:CREATE,dictionary:dictionary};};export var deleteDictionary=function deleteDictionary(dictionary_index){return{type:DELETE,dictionary_index:dictionary_index};};//middlewares\nexport var loadDictionaryFB=function loadDictionaryFB(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var dictionary_data,dictionary_list;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getDocs(collection(db,\"dictionary\"));case 2:dictionary_data=_context.sent;dictionary_list=[];dictionary_data.forEach(function(doc){dictionary_list.push(_objectSpread({id:doc.id},doc.data()));console.log(doc.data());});console.log(dictionary_list);dispatch(loadDictionary(dictionary_list));case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var addDictionaryFB=function addDictionaryFB(dictionary){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var docRef,dictionary_data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return addDoc(collection(db,\"dictionary\"),dictionary);case 2:docRef=_context2.sent;dictionary_data=_objectSpread({id:docRef.id},dictionary);dispatch(createDictionary(dictionary_data));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};// Reducer\nexport default function reducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){// do reducer stuff\ncase\"dictionary/LOAD\":return{list:action.dictionary_list};case\"dictionary/CREATE\":{var new_dictionary_list=[].concat(_toConsumableArray(state.list),[action.dictionary]);return{list:new_dictionary_list};}default:return state;}}","map":{"version":3,"sources":["/Users/bong/sparta/react_week2/dictionary/src/redux/modules/dictionary.js"],"names":["db","collection","doc","getDoc","getDocs","addDoc","updateDoc","deleteDoc","LOAD","CREATE","DELETE","initialState","list","word","explanation","example","loadDictionary","dictionary_list","type","createDictionary","dictionary","deleteDictionary","dictionary_index","loadDictionaryFB","dispatch","dictionary_data","forEach","push","id","data","console","log","addDictionaryFB","docRef","reducer","state","action","new_dictionary_list"],"mappings":"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","sourcesContent":["import { db } from \"../../firebase\";\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  addDoc,\n  updateDoc,\n  deleteDoc,\n} from \"firebase/firestore\";\n\n//Action Type\nconst LOAD = \"dictionary/LOAD\";\nconst CREATE = \"dictionary/CREATE\";\nconst DELETE = \"dictionary/DELETE\";\n\nconst initialState = {\n  list: [\n    { word: \"aaa\", explanation: \"aaa\", example: \"aaa\" },\n    { word: \"bbb\", explanation: \"bbb\", example: \"bbb\" },\n    { word: \"ccc\", explanation: \"ccc\", example: \"ccc\" },\n    { word: \"ddd\", explanation: \"ddd\", example: \"ddd\" },\n    { word: \"eee\", explanation: \"eee\", example: \"eee\" },\n    { word: \"fff\", explanation: \"fff\", example: \"fff\" },\n  ],\n};\n\n//Action Creator\nexport const loadDictionary = (dictionary_list) => {\n  return { type: LOAD, dictionary_list };\n};\n\nexport const createDictionary = (dictionary) => {\n  return { type: CREATE, dictionary };\n};\n\nexport const deleteDictionary = (dictionary_index) => {\n  return { type: DELETE, dictionary_index };\n};\n\n//middlewares\nexport const loadDictionaryFB = () => {\n  return async function (dispatch) {\n    const dictionary_data = await getDocs(collection(db, \"dictionary\"));\n\n    let dictionary_list = [];\n\n    dictionary_data.forEach((doc) => {\n      dictionary_list.push({ id: doc.id, ...doc.data() });\n      console.log(doc.data());\n    });\n    console.log(dictionary_list);\n    dispatch(loadDictionary(dictionary_list));\n  };\n};\n\nexport const addDictionaryFB = (dictionary) => {\n  return async function (dispatch) {\n    const docRef = await addDoc(collection(db, \"dictionary\"), dictionary);\n    const dictionary_data = { id: docRef.id, ...dictionary };\n    dispatch(createDictionary(dictionary_data));\n  };\n};\n\n// Reducer\nexport default function reducer(state = initialState, action = {}) {\n  switch (action.type) {\n    // do reducer stuff\n    case \"dictionary/LOAD\":\n      return { list: action.dictionary_list };\n    case \"dictionary/CREATE\": {\n      const new_dictionary_list = [...state.list, action.dictionary];\n      return { list: new_dictionary_list };\n    }\n\n    default:\n      return state;\n  }\n}\n"]},"metadata":{},"sourceType":"module"}